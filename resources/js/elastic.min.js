/*! elastic.js - v1.0.0 - 2012-11-20
* https://github.com/fullscale/elastic.js
* Copyright (c) 2012 FullScale Labs, LLC; Licensed MIT */
(function(){var e=this,t=e.ejs,n=Array.prototype,r=Object.prototype,i=n.slice,s=r.hasOwnProperty,o=n.forEach,u={},a,f,l,c;typeof exports!="undefined"?c=exports:c=e.ejs={},a=function(e,t){return s.call(e,t)},f=function(e,t,n){if(e==null)return;if(o&&e.forEach===o)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===u)return}else for(var s in e)if(a(e,s)&&t.call(n,e[s],s,e)===u)return},l=function(e){return f(i.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},c.TermFacet=function(e){var t={};return t[e]={terms:{}},{field:function(n){return n==null?t[e].terms.field:(t[e].terms.field=n,this)},size:function(n){return n==null?t[e].terms.size:(t[e].terms.size=n,this)},order:function(n){return n==null?t[e].terms.order:(t[e].terms.order=n,this)},allTerms:function(n){return n==null?t[e].terms.all_terms:(t[e].terms.all_terms=n,this)},exclude:function(){if(arguments.length===0)return t[e].terms.exclude;t[e].terms.exclude=[];for(var n=0;n<arguments.length;n++)t[e].terms.exclude.push(arguments[n].get());return this},regex:function(n,r){return arguments.length===0?{exp:t[e].terms.regex,flags:t[e].terms.regex_flags}:(t[e].terms.regex=n,r!=null&&(t[e].terms.regex_flags=r),this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.DateHistogramFacet=function(e){var t={};return t[e]={date_histogram:{}},{field:function(n){return n==null?t[e].date_histogram.field:(t[e].date_histogram.field=n,this)},interval:function(n){return n==null?t[e].date_histogram.interval:(t[e].date_histogram.interval=n,this)},timeZone:function(n){return n==null?t[e].date_histogram.time_zone:(t[e].date_histogram.time_zone=n,this)},valueField:function(n){return n==null?t[e].date_histogram.value_field:(t[e].date_histogram.value_field=n,this)},keyField:function(n){return n==null?t[e].date_histogram.key_field:(t[e].date_histogram.key_field=n,this)},valueScript:function(n){return n==null?t[e].date_histogram.value_script:(t[e].date_histogram.value_script=n,this)},lang:function(n){return n==null?t[e].date_histogram.lang:(t[e].date_histogram.lang=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.HistogramFacet=function(e){var t={};return t[e]={histogram:{}},{field:function(n){return n==null?t[e].histogram.field:(t[e].histogram.field=n,this)},interval:function(n){return n==null?t[e].histogram.interval:(t[e].histogram.interval=n,this)},valueField:function(n){return n==null?t[e].histogram.value_field:(t[e].histogram.value_field=n,this)},keyField:function(n){return n==null?t[e].histogram.key_field:(t[e].histogram.key_field=n,this)},valueScript:function(n){return n==null?t[e].histogram.value_script:(t[e].histogram.value_script=n,this)},keyScript:function(n){return n==null?t[e].histogram.value_script:(t[e].histogram.value_script=n,this)},lang:function(n){return n==null?t[e].histogram.lang:(t[e].histogram.lang=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.StatisticalFacet=function(e){var t={};return t[e]={statistical:{}},{field:function(n){return n==null?t[e].statistical.field:(t[e].statistical.field=n,this)},fields:function(n){return n==null?t[e].statistical.fields:(t[e].statistical.fields=n,this)},script:function(n){return n==null?t[e].statistical.script:(t[e].statistical.script=n,this)},lang:function(n){return n==null?t[e].statistical.lang:(t[e].statistical.lang=n,this)},params:function(n){return n==null?t[e].statistical.params:(t[e].statistical.params=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.TermStatsFacet=function(e){var t={};return t[e]={terms_stats:{}},{valueField:function(n){return n==null?t[e].terms_stats.value_field:(t[e].terms_stats.value_field=n,this)},keyField:function(n){return n==null?t[e].terms_stats.key_field:(t[e].terms_stats.key_field=n,this)},valueScript:function(n){return n==null?t[e].terms_stats.value_script:(t[e].terms_stats.value_script=n,this)},lang:function(n){return n==null?t[e].terms_stats.lang:(t[e].terms_stats.lang=n,this)},params:function(n){return n==null?t[e].terms_stats.params:(t[e].terms_stats.params=n,this)},size:function(n){return n==null?t[e].terms_stats.size:(t[e].terms_stats.size=n,this)},order:function(n){return n==null?t[e].terms_stats.order:(t[e].terms_stats.order=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.GeoDistanceFacet=function(e){var t={},n=[],r=[0,0],i=null;return t[e]={geo_distance:{distance_unit:"mi"}},{pointField:function(e){return e==null?i:(i=e,this)},point:function(e,t){return arguments.length===0?r:(r=[e,t],this)},addRange:function(e,t){return arguments.length===0?n:(n.push({from:e,to:t}),this)},addUnboundedFrom:function(e){return e==null?n:(n.push({from:e}),this)},addUnboundedTo:function(e){return e==null?n:(n.push({to:e}),this)},distanceUnit:function(n){return n==null?t[e].geo_distance.distance_unit:(t[e].geo_distance.distance_unit=n,this)},distanceType:function(n){return n==null?t[e].geo_distance.distance_type:(t[e].geo_distance.distance_type=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return t[e].geo_distance.ranges=n,i!==null,JSON.stringify(t)},get:function(){return t[e].geo_distance.ranges=n,i!==null&&(t[e].geo_distance[i]=r),t}}},c.QueryFacet=function(e){var t={};return t[e]={},{query:function(n){return n==null?t[e].query:(t[e].query=n.get(),this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.FilterFacet=function(e){var t={};return t[e]={},{filter:function(n){return n==null?t[e].filter:(t[e].filter=n.get(),this)},facetFilter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.RangeFacet=function(e){var t={},n=[];return t[e]={range:{}},{field:function(n){return n==null?t[e].range.field:(t[e].range.field=n,this)},keyField:function(n){return n==null?t[e].range.key_field:(t[e].range.key_field=n,this)},valuefield:function(n){return n==null?t[e].range.value_field:(t[e].range.value_field=n,this)},valueScript:function(n){return n==null?t[e].range.value_script:(t[e].range.value_script=n,this)},keyScript:function(n){return n==null?t[e].range.value_script:(t[e].range.value_script=n,this)},lang:function(n){return n==null?t[e].range.lang:(t[e].range.lang=n,this)},addRange:function(e,t){return arguments.length===0?n:(n.push({from:e,to:t}),this)},addUnboundedFrom:function(e){return e==null?n:(n.push({from:e}),this)},addUnboundedTo:function(e){return e==null?n:(n.push({to:e}),this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return t[e].range.ranges=n,JSON.stringify(t)},get:function(){return t[e].range.ranges=n,t}}},c.TermFilter=function(e,t){var n={term:{}};return n.term[e]=t,{key:function(t){var r=n.term[e];return t==null?e:(e=t,n.term={},n.term[e]=r,this)},value:function(r){return r==null?t:(n.term[e]=r,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},c.TypeFilter=function(e){var t={type:{value:e}};return{type:function(e){return e==null?t.type.value:(t.type.value=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.NotFilter=function(e){var t={not:e.get()};return{filter:function(e){return e==null?t.not:(t.not=e.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.AndFilter=function(e){var t,n,r;t={and:[]};for(n=0,r=e.length;n<r;n++)t.and.push(e[n].get());return{add:function(e){return e==null?t.and:(t.and.push(e.get()),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.NumericRangeFilter=function(e){var t,n,r;return t={numeric_range:{}},t.numeric_range[e]={},n="-1",r="-1",{from:function(r){return r==null?n:(t.numeric_range[e].from=r,n=JSON.stringify(r),this)},to:function(n){return n==null?r:(t.numeric_range[e].to=n,r=JSON.stringify(n),this)},field:function(n){var r=t.numeric_range[e];return n==null?e:(e=n,t.numeric_range={},t.numeric_range[e]=r,this)},key:function(e){return this.field(e)},value:function(e){return this.from(e)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.GeoPolygonFilter=function(e){var t={geo_polygon:{}};return t.geo_polygon[e]={},{points:function(n){return n==null?t.geo_polygon[e].points:(t.geo_polygon[e].points=n,this)},point:function(n,r){return t.geo_polygon[e].points==null&&(t.geo_polygon[e].points=[]),arguments.length===0?t.geo_polygon[e].points:(t.geo_polygon[e].points.push([n,r]),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.GeoBboxFilter=function(e){var t={geo_bounding_box:{}};return t.geo_bounding_box[e]={},{topLeft:function(n,r){return arguments.length===0?t.geo_bounding_box[e].top_left:(t.geo_bounding_box[e].top_left=[n,r],this)},bottomRight:function(n,r){return arguments.length===0?t.geo_bounding_box[e].bottom_right:(t.geo_bounding_box[e].bottom_right=[n,r],this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.GeoDistanceFilter=function(e){var t={geo_distance:{distance_unit:"mi"}};return{distance:function(e){return e==null?t.geo_distance.distance:(t.geo_distance.distance=e,this)},distanceUnit:function(e){return e==null?t.geo_distance.distance_unit:(t.geo_distance.distance_unit=e,this)},point:function(n,r){return arguments.length===0?t.geo_distance[e]:(t.geo_distance[e]=[n,r],this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.GeoDistanceRangeFilter=function(e){var t={geo_distance_range:{distance_unit:"mi"}};return{from:function(e){return e==null?t.geo_distance_range.from:(t.geo_distance_range.from=e,this)},to:function(e){return e==null?t.geo_distance_range.to:(t.geo_distance_range.to=e,this)},distanceUnit:function(e){return e==null?t.geo_distance_range.distance_unit:(t.geo_distance_range.distance_unit=e,this)},point:function(n,r){return arguments.length===0?t.geo_distance_range[e]:(t.geo_distance_range[e]=[n,r],this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.ExistsFilter=function(e){var t={exists:{field:e}};return{toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.PrefixFilter=function(e){var t={prefix:{}};return{prefix:function(n){return n==null?t.prefix[e]:(t.prefix[e]=n,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.MissingFilter=function(e){var t={missing:{field:e}};return{toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.OrFilter=function(e){var t,n,r;t={or:[]};for(n=0,r=e.length;n<r;n++)t.or.push(e[n].get());return{add:function(e){return e==null?t.or:(t.or.push(e.get()),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.Document=function(e){return{get:function(e){},post:function(e){},put:function(e){},del:function(e){}}},c.MatchQuery=function(e,t){var n,r,i={match:{}};return n=e,r=t,i.match[n]={query:r},{boost:function(e){return e==null?i.match[n].boost:(i.match[n].boost=e,this)},query:function(e){return e==null?i.match[n].query:(i.match[n].query=e,this)},type:function(e){if(e==null)return i.match[n].type;if(e==="boolean"||e==="phrase"||e==="phrase_prefix"||e==="phrasePrefix")i.match[n].type=e;return this},fuzziness:function(e){return e==null?i.match[n].fuzziness:(i.match[n].fuzziness=e,this)},prefixLength:function(e){return e==null?i.match[n].prefix_length:(i.match[n].prefix_length=e,this)},maxExpansions:function(e){return e==null?i.match[n].max_expansions:(i.match[n].max_expansions=e,this)},operator:function(e){if(e==null)return i.match[n].operator;e=e.toLowerCase();if(e==="and"||e==="or")i.match[n].operator=e;return this},slop:function(e){return e==null?i.match[n].slop:(i.match[n].slop=e,this)},analyzer:function(e){return e==null?i.match[n].analyzer:(i.match[n].analyzer=e,this)},toString:function(){return JSON.stringify(i)},get:function(){return i}}},c.MultiMatchQuery=function(e,t){var n={multi_match:{query:t,fields:e}};return{fields:function(e){return e==null?n.multi_match.fields:(n.multi_match.fields=e,this)},useDisMax:function(e){return e==null?n.multi_match.use_dis_max:(n.multi_match.use_dis_max=e,this)},tieBreaker:function(e){return e==null?n.multi_match.tie_breaker:(n.multi_match.tie_breaker=e,this)},boost:function(e){return e==null?n.multi_match.boost:(n.multi_match.boost=e,this)},query:function(e){return e==null?n.multi_match.query:(n.multi_match.query=e,this)},type:function(e){if(e==null)return n.multi_match.type;if(e==="boolean"||e==="phrase"||e==="phrase_prefix"||e==="phrasePrefix")n.multi_match.type=e;return this},fuzziness:function(e){return e==null?n.multi_match.fuzziness:(n.multi_match.fuzziness=e,this)},prefixLength:function(e){return e==null?n.multi_match.prefix_length:(n.multi_match.prefix_length=e,this)},maxExpansions:function(e){return e==null?n.multi_match.max_expansions:(n.multi_match.max_expansions=e,this)},operator:function(e){if(e==null)return n.multi_match.operator;e=e.toLowerCase();if(e==="and"||e==="or")n.multi_match.operator=e;return this},slop:function(e){return e==null?n.multi_match.slop:(n.multi_match.slop=e,this)},analyzer:function(e){return e==null?n.multi_match.analyzer:(n.multi_match.analyzer=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},c.TermQuery=function(e,t){var n,r,i={term:{}};return n=e,r=t,i.term[n]=r,{boost:function(e){return e==null?i.term[n].boost:(i.term[n]={value:r,boost:e},this)},toString:function(){return JSON.stringify(i)},get:function(){return i}}},c.BoolQuery=function(){var e={bool:{}};return{must:function(t){return e.bool.must==null&&(e.bool.must=[]),t==null?e.bool.must:(e.bool.must.push(t.get()),this)},mustNot:function(t){return e.bool.mustNot==null&&(e.bool.mustNot=[]),t==null?e.bool.mustNot:(e.bool.mustNot.push(t.get()),this)},should:function(t){return e.bool.should==null&&(e.bool.should=[]),t==null?e.bool.should:(e.bool.should.push(t.get()),this)},boost:function(t){return t==null?e.bool.boost:(e.bool.boost=t,this)},disableCoord:function(t){return t==null?e.bool.disable_coord:(e.bool.disable_coord=t,this)},minimumNumberShouldMatch:function(t){return t==null?e.bool.minimum_number_should_match:(e.bool.minimum_number_should_match=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},c.FieldQuery=function(e,t){var n,r,i={field:{}},s=function(){typeof i.field[n]=="string"&&(i.field[n]={query:r})};return n=e,r=t,i.field[n]=r,{defaultOperator:function(e){s();if(e==null)return i.field[n].default_operator;e=e.toUpperCase();if(e==="AND"||e==="OR")i.field[n].default_operator=e;return this},analyzer:function(e){return s(),e==null?i.field[n].analyzer:(i.field[n].analyzer=e,this)},autoGeneratePhraseQueries:function(e){return s(),e==null?i.field[n].auto_generate_phrase_queries:(i.field[n].auto_generate_phrase_queries=e,this)},allowLeadingWildcard:function(e){return s(),e==null?i.field[n].allow_leading_wildcard:(i.field[n].allow_leading_wildcard=e,this)},lowercaseExpandedTerms:function(e){return s(),e==null?i.field[n].lowercase_expanded_terms:(i.field[n].lowercase_expanded_terms=e,this)},enablePositionIncrements:function(e){return s(),e==null?i.field[n].enable_position_increments:(i.field[n].enable_position_increments=e,this)},fuzzyMinSim:function(e){return s(),e==null?i.field[n].fuzzy_min_sim:(i.field[n].fuzzy_min_sim=e,this)},boost:function(e){return s(),e==null?i.field[n].boost:(i.field[n].boost=e,this)},fuzzyPrefixLength:function(e){return s(),e==null?i.field[n].fuzzy_prefix_length:(i.field[n].fuzzy_prefix_length=e,this)},phraseSlop:function(e){return s(),e==null?i.field[n].phrase_slop:(i.field[n].phrase_slop=e,this)},analyzeWildcard:function(e){return s(),e==null?i.field[n].analyze_wildcard:(i.field[n].analyze_wildcard=e,this)},minimumShouldMatch:function(e){return s(),e==null?i.field[n].minimum_should_match:(i.field[n].minimum_should_match=e,this)},toString:function(){return JSON.stringify(i)},get:function(){return i}}},c.DisMaxQuery=function(){var e={dis_max:{}};return{add:function(t){return t==null?e.dis_max.queries:(typeof e.dis_max.queries!="undefined"?e.dis_max.queries.push(t.get()):e.dis_max.queries=[t.get()],this)},boost:function(t){return t==null?e.dis_max.boost:(e.dis_max.boost=t,this)},tieBreaker:function(t){return t==null?e.dis_max.tie_breaker:(e.dis_max.tie_breaker=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},c.QueryString=function(e){var t={query_string:{}};return t.query_string.query=e,{query:function(e){return e==null?t.query_string.query:(t.query_string.query=e,this)},defaultField:function(e){return e==null?t.query_string.default_field:(t.query_string.default_field=e,this)},fields:function(e){return e==null?t.query_string.fields:(t.query_string.fields=e,this)},useDisMax:function(e){return e==null?t.query_string.use_dis_max:(t.query_string.use_dis_max=e,this)},defaultOperator:function(e){if(e==null)return t.query_string.default_operator;e=e.toUpperCase();if(e==="AND"||e==="OR")t.query_string.default_operator=e;return this},analyzer:function(e){return e==null?t.query_string.analyzer:(t.query_string.analyzer=e,this)},allowLeadingWildcard:function(e){return e==null?t.query_string.allow_leading_wildcard:(t.query_string.allow_leading_wildcard=e,this)},lowercaseExpandedTerms:function(e){return e==null?t.query_string.lowercase_expanded_terms:(t.query_string.lowercase_expanded_terms=e,this)},enablePositionIncrements:function(e){return e==null?t.query_string.enable_position_increments:(t.query_string.enable_position_increments=e,this)},fuzzyPrefixLength:function(e){return e==null?t.query_string.fuzzy_prefix_length:(t.query_string.fuzzy_prefix_length=e,this)},fuzzyMinSim:function(e){return e==null?t.query_string.fuzzy_min_sim:(t.query_string.fuzzy_min_sim=e,this)},phraseSlop:function(e){return e==null?t.query_string.phrase_slop:(t.query_string.phrase_slop=e,this)},boost:function(e){return e==null?t.query_string.boost:(t.query_string.boost=e,this)},analyzeWildcard:function(e){return e==null?t.query_string.analyze_wildcard:(t.query_string.analyze_wildcard=e,this)},autoGeneratePhraseQueries:function(e){return e==null?t.query_string.auto_generate_phrase_queries:(t.query_string.auto_generate_phrase_queries=e,this)},minimumShouldMatch:function(e){return e==null?t.query_string.minimum_should_match:(t.query_string.minimum_should_match=e,this)},tieBreaker:function(e){return e==null?t.query_string.tie_breaker:(t.query_string.tie_breaker=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.FilteredQuery=function(e,t){var n={filtered:{query:e.get(),filter:t.get()}};return{toString:function(){return JSON.stringify(n)},get:function(){return n}}},c.NestedQuery=function(e){var t={nested:{}};return e!=null&&(t.nested.query=e.get()),{path:function(e){return e==null?t.nested.path:(t.nested.path=e,this)},scoreMode:function(e){return e==null?t.nested.score_mode:(t.nested.score_mode=e,this)},query:function(e){return e==null?t.nested.query:(t.nested.query=e.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.ConstantScoreQuery=function(){var e={constant_score:{}};return{query:function(t){return t==null?e.constant_score.query:(e.constant_score.query=t.get(),this)},filter:function(t){return t==null?e.constant_score.filter:(e.constant_score.filter=t.get(),this)},boost:function(t){return t==null?e.constant_score.boost:(e.constant_score.boost=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},c.MatchAllQuery=function(){var e={match_all:{}};return{toString:function(){return JSON.stringify(e)},get:function(){return e}}},c.SpanTermQuery=function(e,t){var n,r,i={span_term:{}};return n=e,r=t,i.span_term[n]=r,{boost:function(e){return e==null?i.span_term[n].boost:(i.span_term[n]={value:r,boost:e},this)},toString:function(){return JSON.stringify(i)},get:function(){return i}}},c.SpanNearQuery=function(e){e=e||[];var t={span_near:{clauses:[]}},n=e.length,r=0;for(;r<n;r++)t.span_near.clauses.push(e[r].get());return{addClause:function(e){return e==null?t.span_near.clauses:(t.span_near.clauses.push(e.get()),this)},clauses:function(e){if(e==null)return t.span_near.clauses;t.span_near.clauses=[];var n=e.length,r=0;for(;r<n;r++)this.addClause(e[r]);return this},slop:function(e){return e==null?t.span_near.slop:(t.span_near.slop=e,this)},inOrder:function(e){return e==null?t.span_near.in_order:(t.span_near.in_order=e,this)},collectPayloads:function(e){return e==null?t.span_near.collect_payloads:(t.span_near.collect_payloads=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.SpanNotQuery=function(){var e={span_not:{}};return{include:function(t){return t==null?e.span_not.include:(e.span_not.include=t.get(),this)},exclude:function(t){return t==null?e.span_not.exclude:(e.span_not.exclude=t.get(),this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},c.SpanOrQuery=function(e){e=e||[];var t={span_or:{clauses:[]}},n=e.length,r=0;for(;r<n;r++)t.span_or.clauses.push(e[r].get());return{addClause:function(e){return e==null?t.span_or.clauses:(t.span_or.clauses.push(e.get()),this)},clauses:function(e){if(e==null)return t.span_or.clauses;t.span_or.clauses=[];var n=e.length,r=0;for(;r<n;r++)this.addClause(e[r]);return this},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.SpanFirstQuery=function(){var e={span_first:{}};return{match:function(t){return t==null?e.span_first.match:(e.span_first.match=t.get(),this)},end:function(t){return t==null?e.span_first.end:(e.span_first.end=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},c.Request=function(e){var t,n,r;return t={size:10,from:0},e=e||{},e.collections==null?n=[]:typeof e.collections=="string"?n=[e.collections]:n=e.collections,e.types==null?r=[]:typeof e.types=="string"?r=[e.types]:r=e.types,n.length===0&&r.length>0&&(n=["_all"]),{sort:function(e,n){n=n||"desc",a(t,"sort")||(t.sort=[]);if(arguments.length===0)return t.sort;var r={};return r[e]=n,t.sort.push(r),this},size:function(e){return e==null?t.size:(t.size=e,this)},fields:function(e){return e==null?t.fields:(t.fields=e,this)},from:function(e){return e==null?t.from:(t.from=e,this)},query:function(e){return e==null?t.query:(t.query=e.get(),this)},collections:function(e){return e==null?n:(typeof e=="string"?n=[e]:n=e,n.length===0&&r.length>0&&(n=["_all"]),this)},types:function(e){return e==null?r:(typeof e=="string"?r=[e]:r=e,n.length===0&&r.length>0&&(n=["_all"]),this)},facet:function(e){return e==null?t.facets:(t.facets==null&&(t.facets={}),l(t.facets,e.get()),this)},filter:function(e){return e==null?t.filter:(t.filter=e.get(),this)},highlight:function(e){var n,r;t.highlight={fields:{}};if(e==null)return t.highlight.fields;for(n=0,r=e.length;n<r;n++)t.highlight.fields[e[n]]={};return this},highlightPreTags:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.pre_tags:(n==null?t.highlight.pre_tags=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].pre_tags=e),this)},highlightPostTags:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.post_tags:(n==null?t.highlight.post_tags=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].post_tags=e),this)},highlightTagSchema:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.tags_schema:(n==null?t.highlight.tags_schema=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].tags_schema=e),this)},highlightFragments:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.number_of_fragments:(n==null?t.highlight.number_of_fragments=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].number_of_fragments=e),this)},highlightFragmentSize:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.fragment_size:(n==null?t.highlight.fragment_size=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].fragment_size=e),this)},computedProperty:function(e){return e==null?t.script_fields:(t.script_fields==null&&(t.script_fields={}),l(t.script_fields,e.get()),this)},preference:function(e){return e==null?t.perference:(t.perference=e,this)},indexBoost:function(e,n){return t.indices_boost==null&&(t.indices_boost={}),arguments.length===0?t.indices_boost:(t.indices_boost[e]=n,this)},explain:function(e){return e==null?t.explain:(t.explain=e,this)},version:function(e){return e==null?t.version:(t.version=e,this)},minScore:function(e){return e==null?t.min_score:(t.min_score=e,this)},toString:function(){return JSON.stringify(t)},get:function(e){var i=JSON.stringify(t),s="";if(c.client==null)throw new Error("No Client Set");return n.length>0&&(s=s+"/"+n.join()),r.length>0&&(s=s+"/"+r.join()),s+="/_search",c.client.post(s,i,e)}}},c.ComputedProperty=function(e){var t={};return t[e]={},{lang:function(n){return n==null?t[e].lang:(t[e].lang=n,this)},script:function(n){return n==null?t[e].script:(t[e].script=n,this)},params:function(n){return n==null?t[e].params:(t[e].params=n,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},c.noConflict=function(){return e.ejs=t,this}})(this);