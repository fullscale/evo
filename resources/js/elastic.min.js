/*! elastic.js - v1.0.0 - 2012-12-08
* https://github.com/fullscale/elastic.js
* Copyright (c) 2012 FullScale Labs, LLC; Licensed MIT */
"use strict";(function(){var e=this,t=e&&e.ejs,n=Array.prototype,r=Object.prototype,i=n.slice,s=r.toString,o=r.hasOwnProperty,u=n.forEach,a=Array.isArray,f={},l,c,h,p,d,v,m,g,y,b;typeof exports!="undefined"?b=exports:b=e.ejs={},l=function(e,t){return o.call(e,t)},c=function(e,t,n){if(e==null)return;if(u&&e.forEach===u)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e)===f)return}else for(var s in e)if(l(e,s)&&t.call(n,e[s],s,e)===f)return},h=function(e){return c(i.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},p=a||function(e){return s.call(e)==="[object Array]"},d=function(e){return e===Object(e)},v=function(e){return s.call(e)==="[object String]"},m=function(e){return s.call(e)==="[object Number]"},typeof /./!="function"?g=function(e){return typeof e=="function"}:g=function(e){return s.call(e)==="[object Function]"},y=function(e){return d(e)&&l(e,"get")&&l(e,"toString")},b.DateHistogramFacet=function(e){var t={};return t[e]={date_histogram:{}},{field:function(n){return n==null?t[e].date_histogram.field:(t[e].date_histogram.field=n,this)},interval:function(n){return n==null?t[e].date_histogram.interval:(t[e].date_histogram.interval=n,this)},timeZone:function(n){return n==null?t[e].date_histogram.time_zone:(t[e].date_histogram.time_zone=n,this)},valueField:function(n){return n==null?t[e].date_histogram.value_field:(t[e].date_histogram.value_field=n,this)},keyField:function(n){return n==null?t[e].date_histogram.key_field:(t[e].date_histogram.key_field=n,this)},valueScript:function(n){return n==null?t[e].date_histogram.value_script:(t[e].date_histogram.value_script=n,this)},lang:function(n){return n==null?t[e].date_histogram.lang:(t[e].date_histogram.lang=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.FilterFacet=function(e){var t={};return t[e]={},{filter:function(n){return n==null?t[e].filter:(t[e].filter=n.get(),this)},facetFilter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoDistanceFacet=function(e){var t={},n=[],r=[0,0],i=null;return t[e]={geo_distance:{distance_unit:"mi"}},{pointField:function(e){return e==null?i:(i=e,this)},point:function(e,t){return arguments.length===0?r:(r=[e,t],this)},addRange:function(e,t){return arguments.length===0?n:(n.push({from:e,to:t}),this)},addUnboundedFrom:function(e){return e==null?n:(n.push({from:e}),this)},addUnboundedTo:function(e){return e==null?n:(n.push({to:e}),this)},distanceUnit:function(n){return n==null?t[e].geo_distance.distance_unit:(t[e].geo_distance.distance_unit=n,this)},distanceType:function(n){return n==null?t[e].geo_distance.distance_type:(t[e].geo_distance.distance_type=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return t[e].geo_distance.ranges=n,i!==null,JSON.stringify(t)},get:function(){return t[e].geo_distance.ranges=n,i!==null&&(t[e].geo_distance[i]=r),t}}},b.HistogramFacet=function(e){var t={};return t[e]={histogram:{}},{field:function(n){return n==null?t[e].histogram.field:(t[e].histogram.field=n,this)},interval:function(n){return n==null?t[e].histogram.interval:(t[e].histogram.interval=n,this)},valueField:function(n){return n==null?t[e].histogram.value_field:(t[e].histogram.value_field=n,this)},keyField:function(n){return n==null?t[e].histogram.key_field:(t[e].histogram.key_field=n,this)},valueScript:function(n){return n==null?t[e].histogram.value_script:(t[e].histogram.value_script=n,this)},keyScript:function(n){return n==null?t[e].histogram.value_script:(t[e].histogram.value_script=n,this)},lang:function(n){return n==null?t[e].histogram.lang:(t[e].histogram.lang=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.QueryFacet=function(e){var t={};return t[e]={},{query:function(n){return n==null?t[e].query:(t[e].query=n.get(),this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.RangeFacet=function(e){var t={},n=[];return t[e]={range:{}},{field:function(n){return n==null?t[e].range.field:(t[e].range.field=n,this)},keyField:function(n){return n==null?t[e].range.key_field:(t[e].range.key_field=n,this)},valuefield:function(n){return n==null?t[e].range.value_field:(t[e].range.value_field=n,this)},valueScript:function(n){return n==null?t[e].range.value_script:(t[e].range.value_script=n,this)},keyScript:function(n){return n==null?t[e].range.value_script:(t[e].range.value_script=n,this)},lang:function(n){return n==null?t[e].range.lang:(t[e].range.lang=n,this)},addRange:function(e,t){return arguments.length===0?n:(n.push({from:e,to:t}),this)},addUnboundedFrom:function(e){return e==null?n:(n.push({from:e}),this)},addUnboundedTo:function(e){return e==null?n:(n.push({to:e}),this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return t[e].range.ranges=n,JSON.stringify(t)},get:function(){return t[e].range.ranges=n,t}}},b.StatisticalFacet=function(e){var t={};return t[e]={statistical:{}},{field:function(n){return n==null?t[e].statistical.field:(t[e].statistical.field=n,this)},fields:function(n){return n==null?t[e].statistical.fields:(t[e].statistical.fields=n,this)},script:function(n){return n==null?t[e].statistical.script:(t[e].statistical.script=n,this)},lang:function(n){return n==null?t[e].statistical.lang:(t[e].statistical.lang=n,this)},params:function(n){return n==null?t[e].statistical.params:(t[e].statistical.params=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.TermsFacet=function(e){var t={};return t[e]={terms:{}},{field:function(n){return n==null?t[e].terms.field:(t[e].terms.field=n,this)},size:function(n){return n==null?t[e].terms.size:(t[e].terms.size=n,this)},order:function(n){return n==null?t[e].terms.order:(t[e].terms.order=n,this)},allTerms:function(n){return n==null?t[e].terms.all_terms:(t[e].terms.all_terms=n,this)},exclude:function(){if(arguments.length===0)return t[e].terms.exclude;t[e].terms.exclude=[];for(var n=0;n<arguments.length;n++)t[e].terms.exclude.push(arguments[n].get());return this},regex:function(n,r){return arguments.length===0?{exp:t[e].terms.regex,flags:t[e].terms.regex_flags}:(t[e].terms.regex=n,r!=null&&(t[e].terms.regex_flags=r),this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.TermStatsFacet=function(e){var t={};return t[e]={terms_stats:{}},{valueField:function(n){return n==null?t[e].terms_stats.value_field:(t[e].terms_stats.value_field=n,this)},keyField:function(n){return n==null?t[e].terms_stats.key_field:(t[e].terms_stats.key_field=n,this)},valueScript:function(n){return n==null?t[e].terms_stats.value_script:(t[e].terms_stats.value_script=n,this)},lang:function(n){return n==null?t[e].terms_stats.lang:(t[e].terms_stats.lang=n,this)},params:function(n){return n==null?t[e].terms_stats.params:(t[e].terms_stats.params=n,this)},size:function(n){return n==null?t[e].terms_stats.size:(t[e].terms_stats.size=n,this)},order:function(n){return n==null?t[e].terms_stats.order:(t[e].terms_stats.order=n,this)},filter:function(n){return n==null?t[e].facet_filter:(t[e].facet_filter=n.get(),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.AndFilter=function(e){var t,n,r={and:{filters:[]}};if(y(e))r.and.filters.push(e.get());else{if(!p(e))throw new TypeError("Argument must be a Filter or Array of Filters");for(t=0,n=e.length;t<n;t++){if(!y(e[t]))throw new TypeError("Array must contain only Filter objects");r.and.filters.push(e[t].get())}}return{filters:function(e){var t,n;if(e==null)return r.and.filters;if(y(e))r.and.filters.push(e.get());else{if(!p(e))throw new TypeError("Argument must be a Filter or an Array of Filters");r.and.filters=[];for(t=0,n=e.length;t<n;t++){if(!y(e[t]))throw new TypeError("Array must contain only Filter objects");r.and.filters.push(e[t].get())}}return this},name:function(e){return e==null?r.and._name:(r.and._name=e,this)},cache:function(e){return e==null?r.and._cache:(r.and._cache=e,this)},cacheKey:function(e){return e==null?r.and._cache_key:(r.and._cache_key=e,this)},toString:function(){return JSON.stringify(r)},get:function(){return r}}},b.BoolFilter=function(){var e={bool:{}};return{must:function(t){var n,r;e.bool.must==null&&(e.bool.must=[]);if(t==null)return e.bool.must;if(y(t))e.bool.must.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Filter or array of Filters");e.bool.must=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be an array of Filters");e.bool.must.push(t[n].get())}}return this},mustNot:function(t){var n,r;e.bool.must_not==null&&(e.bool.must_not=[]);if(t==null)return e.bool.must_not;if(y(t))e.bool.must_not.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Filter or array of Filters");e.bool.must_not=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be an array of Filters");e.bool.must_not.push(t[n].get())}}return this},should:function(t){var n,r;e.bool.should==null&&(e.bool.should=[]);if(t==null)return e.bool.should;if(y(t))e.bool.should.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Filter or array of Filters");e.bool.should=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be an array of Filters");e.bool.should.push(t[n].get())}}return this},name:function(t){return t==null?e.bool._name:(e.bool._name=t,this)},cache:function(t){return t==null?e.bool._cache:(e.bool._cache=t,this)},cacheKey:function(t){return t==null?e.bool._cache_key:(e.bool._cache_key=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.ExistsFilter=function(e){var t={exists:{field:e}};return{field:function(e){return e==null?t.exists.field:(t.exists.field=e,this)},name:function(e){return e==null?t.exists._name:(t.exists._name=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoBboxFilter=function(e){var t={geo_bounding_box:{}};return t.geo_bounding_box[e]={},{field:function(n){var r=t.geo_bounding_box[e];return n==null?e:(delete t.geo_bounding_box[e],e=n,t.geo_bounding_box[n]=r,this)},topLeft:function(n){if(n==null)return t.geo_bounding_box[e].top_left;if(!y(n))throw new TypeError("Argument must be a GeoPoint");return t.geo_bounding_box[e].top_left=n.get(),this},bottomRight:function(n){if(n==null)return t.geo_bounding_box[e].bottom_right;if(!y(n))throw new TypeError("Argument must be a GeoPoint");return t.geo_bounding_box[e].bottom_right=n.get(),this},type:function(e){if(e==null)return t.geo_bounding_box.type;e=e.toLowerCase();if(e==="memory"||e==="indexed")t.geo_bounding_box.type=e;return this},normalize:function(e){return e==null?t.geo_bounding_box.normalize:(t.geo_bounding_box.normalize=e,this)},name:function(e){return e==null?t.geo_bounding_box._name:(t.geo_bounding_box._name=e,this)},cache:function(e){return e==null?t.geo_bounding_box._cache:(t.geo_bounding_box._cache=e,this)},cacheKey:function(e){return e==null?t.geo_bounding_box._cache_key:(t.geo_bounding_box._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoDistanceFilter=function(e){var t={geo_distance:{}};return t.geo_distance[e]=[0,0],{field:function(n){var r=t.geo_distance[e];return n==null?e:(delete t.geo_distance[e],e=n,t.geo_distance[n]=r,this)},distance:function(e){if(e==null)return t.geo_distance.distance;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance.distance=e,this},unit:function(e){if(e==null)return t.geo_distance.unit;e=e.toLowerCase();if(e==="mi"||e==="km")t.geo_distance.unit=e;return this},point:function(n){if(n==null)return t.geo_distance[e];if(!y(n))throw new TypeError("Argument must be a GeoPoint");return t.geo_distance[e]=n.get(),this},distanceType:function(e){if(e==null)return t.geo_distance.distance_type;e=e.toLowerCase();if(e==="arc"||e==="plane")t.geo_distance.distance_type=e;return this},normalize:function(e){return e==null?t.geo_distance.normalize:(t.geo_distance.normalize=e,this)},optimizeBbox:function(e){if(e==null)return t.geo_distance.optimize_bbox;e=e.toLowerCase();if(e==="memory"||e==="indexed"||e==="none")t.geo_distance.optimize_bbox=e;return this},name:function(e){return e==null?t.geo_distance._name:(t.geo_distance._name=e,this)},cache:function(e){return e==null?t.geo_distance._cache:(t.geo_distance._cache=e,this)},cacheKey:function(e){return e==null?t.geo_distance._cache_key:(t.geo_distance._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoDistanceRangeFilter=function(e){var t={geo_distance_range:{}};return t.geo_distance_range[e]=[0,0],{field:function(n){var r=t.geo_distance_range[e];return n==null?e:(delete t.geo_distance_range[e],e=n,t.geo_distance_range[n]=r,this)},from:function(e){if(e==null)return t.geo_distance_range.from;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance_range.from=e,this},to:function(e){if(e==null)return t.geo_distance_range.to;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance_range.to=e,this},includeLower:function(e){return e==null?t.geo_distance_range.include_lower:(t.geo_distance_range.include_lower=e,this)},includeUpper:function(e){return e==null?t.geo_distance_range.include_upper:(t.geo_distance_range.include_upper=e,this)},gt:function(e){if(e==null)return t.geo_distance_range.gt;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance_range.gt=e,this},gte:function(e){if(e==null)return t.geo_distance_range.gte;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance_range.gte=e,this},lt:function(e){if(e==null)return t.geo_distance_range.lt;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance_range.lt=e,this},lte:function(e){if(e==null)return t.geo_distance_range.lte;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.geo_distance_range.lte=e,this},unit:function(e){if(e==null)return t.geo_distance_range.unit;e=e.toLowerCase();if(e==="mi"||e==="km")t.geo_distance_range.unit=e;return this},point:function(n){if(n==null)return t.geo_distance_range[e];if(!y(n))throw new TypeError("Argument must be a GeoPoint");return t.geo_distance_range[e]=n.get(),this},distanceType:function(e){if(e==null)return t.geo_distance_range.distance_type;e=e.toLowerCase();if(e==="arc"||e==="plane")t.geo_distance_range.distance_type=e;return this},normalize:function(e){return e==null?t.geo_distance_range.normalize:(t.geo_distance_range.normalize=e,this)},optimizeBbox:function(e){if(e==null)return t.geo_distance_range.optimize_bbox;e=e.toLowerCase();if(e==="memory"||e==="indexed"||e==="none")t.geo_distance_range.optimize_bbox=e;return this},name:function(e){return e==null?t.geo_distance_range._name:(t.geo_distance_range._name=e,this)},cache:function(e){return e==null?t.geo_distance_range._cache:(t.geo_distance_range._cache=e,this)},cacheKey:function(e){return e==null?t.geo_distance_range._cache_key:(t.geo_distance_range._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoPolygonFilter=function(e){var t={geo_polygon:{}};return t.geo_polygon[e]={points:[]},{field:function(n){var r=t.geo_polygon[e];return n==null?e:(delete t.geo_polygon[e],e=n,t.geo_polygon[n]=r,this)},points:function(n){var r,i;if(n==null)return t.geo_polygon[e].points;if(y(n))t.geo_polygon[e].points.push(n.get());else{if(!p(n))throw new TypeError("Argument must be a GeoPoint or Array of GeoPoints");t.geo_polygon[e].points=[];for(r=0,i=n.length;r<i;r++){if(!y(n[r]))throw new TypeError("Argument must be Array of GeoPoints");t.geo_polygon[e].points.push(n[r].get())}}return this},normalize:function(e){return e==null?t.geo_polygon.normalize:(t.geo_polygon.normalize=e,this)},name:function(e){return e==null?t.geo_polygon._name:(t.geo_polygon._name=e,this)},cache:function(e){return e==null?t.geo_polygon._cache:(t.geo_polygon._cache=e,this)},cacheKey:function(e){return e==null?t.geo_polygon._cache_key:(t.geo_polygon._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoShapeFilter=function(e){var t={geo_shape:{}};return t.geo_shape[e]={},{field:function(n){var r=t.geo_shape[e];return n==null?e:(delete t.geo_shape[e],e=n,t.geo_shape[n]=r,this)},shape:function(n){return n==null?t.geo_shape[e].shape:(t.geo_shape[e].indexed_shape!=null&&delete t.geo_shape[e].indexed_shape,t.geo_shape[e].shape=n.get(),this)},indexedShape:function(n){return n==null?t.geo_shape[e].indexed_shape:(t.geo_shape[e].shape!=null&&delete t.geo_shape[e].shape,t.geo_shape[e].indexed_shape=n.get(),this)},relation:function(n){if(n==null)return t.geo_shape[e].relation;n=n.toLowerCase();if(n==="intersects"||n==="disjoint"||n==="within")t.geo_shape[e].relation=n;return this},name:function(e){return e==null?t.geo_shape._name:(t.geo_shape._name=e,this)},cache:function(e){return e==null?t.geo_shape._cache:(t.geo_shape._cache=e,this)},cacheKey:function(e){return e==null?t.geo_shape._cache_key:(t.geo_shape._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.HasChildFilter=function(e,t){if(!y(e))throw new TypeError("No Query object found");var n={has_child:{query:e.get(),type:t}};return{query:function(e){if(e==null)return n.has_child.query;if(!y(e))throw new TypeError("Argument must be a Query object");return n.has_child.query=e.get(),this},type:function(e){return e==null?n.has_child.type:(n.has_child.type=e,this)},scope:function(e){return e==null?n.has_child._scope:(n.has_child._scope=e,this)},name:function(e){return e==null?n.has_child._name:(n.has_child._name=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.HasParentFilter=function(e,t){if(!y(e))throw new TypeError("No Query object found");var n={has_parent:{query:e.get(),parent_type:t}};return{query:function(e){if(e==null)return n.has_parent.query;if(!y(e))throw new TypeError("Argument must be a Query object");return n.has_parent.query=e.get(),this},parentType:function(e){return e==null?n.has_parent.parent_type:(n.has_parent.parent_type=e,this)},scope:function(e){return e==null?n.has_parent._scope:(n.has_parent._scope=e,this)},name:function(e){return e==null?n.has_parent._name:(n.has_parent._name=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.IdsFilter=function(e){var t={ids:{}};if(v(e))t.ids.values=[e];else{if(!p(e))throw new TypeError("Argument must be a string or an array");t.ids.values=e}return{values:function(e){if(e==null)return t.ids.values;if(v(e))t.ids.values.push(e);else{if(!p(e))throw new TypeError("Argument must be a string or an array");t.ids.values=e}return this},type:function(e){t.ids.type==null&&(t.ids.type=[]);if(e==null)return t.ids.type;if(v(e))t.ids.type.push(e);else{if(!p(e))throw new TypeError("Argument must be a string or an array");t.ids.type=e}return this},name:function(e){return e==null?t.ids._name:(t.ids._name=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.LimitFilter=function(e){var t={limit:{value:e}};return{value:function(e){if(e==null)return t.limit.value;if(!m(e))throw new TypeError("Argument must be a numeric value");return t.limit.value=e,this},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.MatchAllFilter=function(){var e={match_all:{}};return{toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.MissingFilter=function(e){var t={missing:{field:e}};return{field:function(e){return e==null?t.missing.field:(t.missing.field=e,this)},existence:function(e){return e==null?t.missing.existence:(t.missing.existence=e,this)},nullValue:function(e){return e==null?t.missing.null_value:(t.missing.null_value=e,this)},name:function(e){return e==null?t.missing._name:(t.missing._name=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.NestedFilter=function(e){var t={nested:{path:e}};return{path:function(e){return e==null?t.nested.path:(t.nested.path=e,this)},query:function(e){if(e==null)return t.nested.query;if(!y(e))throw new TypeError("Argument must be a Query object");return t.nested.query=e.get(),this},filter:function(e){if(e==null)return t.nested.filter;if(!y(e))throw new TypeError("Argument must be a Filter object");return t.nested.filter=e.get(),this},boost:function(e){return e==null?t.nested.boost:(t.nested.boost=e,this)},scope:function(e){return e==null?t.nested._scope:(t.nested._scope=e,this)},name:function(e){return e==null?t.nested._name:(t.nested._name=e,this)},cache:function(e){return e==null?t.nested._cache:(t.nested._cache=e,this)},cacheKey:function(e){return e==null?t.nested._cache_key:(t.nested._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.NotFilter=function(e){if(!y(e))throw new TypeError("Argument must be a Filter");var t={not:e.get()};return{filter:function(e){if(e==null)return t.not;if(!y(e))throw new TypeError("Argument must be a Filter");return t.not=e.get(),this},name:function(e){return e==null?t.not._name:(t.not._name=e,this)},cache:function(e){return e==null?t.not._cache:(t.not._cache=e,this)},cacheKey:function(e){return e==null?t.not._cache_key:(t.not._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.NumericRangeFilter=function(e){var t={numeric_range:{}};return t.numeric_range[e]={},{field:function(n){var r=t.numeric_range[e];return n==null?e:(delete t.numeric_range[e],e=n,t.numeric_range[e]=r,this)},from:function(n){if(n==null)return t.numeric_range[e].from;if(!m(n))throw new TypeError("Argument must be a numeric value");return t.numeric_range[e].from=n,this},to:function(n){if(n==null)return t.numeric_range[e].to;if(!m(n))throw new TypeError("Argument must be a numeric value");return t.numeric_range[e].to=n,this},includeLower:function(n){return n==null?t.numeric_range[e].include_lower:(t.numeric_range[e].include_lower=n,this)},includeUpper:function(n){return n==null?t.numeric_range[e].include_upper:(t.numeric_range[e].include_upper=n,this)},gt:function(n){if(n==null)return t.numeric_range[e].gt;if(!m(n))throw new TypeError("Argument must be a numeric value");return t.numeric_range[e].gt=n,this},gte:function(n){if(n==null)return t.numeric_range[e].gte;if(!m(n))throw new TypeError("Argument must be a numeric value");return t.numeric_range[e].gte=n,this},lt:function(n){if(n==null)return t.numeric_range[e].lt;if(!m(n))throw new TypeError("Argument must be a numeric value");return t.numeric_range[e].lt=n,this},lte:function(n){if(n==null)return t.numeric_range[e].lte;if(!m(n))throw new TypeError("Argument must be a numeric value");return t.numeric_range[e].lte=n,this},name:function(e){return e==null?t.numeric_range._name:(t.numeric_range._name=e,this)},cache:function(e){return e==null?t.numeric_range._cache:(t.numeric_range._cache=e,this)},cacheKey:function(e){return e==null?t.numeric_range._cache_key:(t.numeric_range._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.OrFilter=function(e){var t,n,r;t={or:{filters:[]}};if(y(e))t.or.filters.push(e.get());else{if(!p(e))throw new TypeError("Argument must be a Filter or array of Filters");for(n=0,r=e.length;n<r;n++){if(!y(e[n]))throw new TypeError("Argument must be array of Filters");t.or.filters.push(e[n].get())}}return{filters:function(e){var n,r;if(e==null)return t.or.filters;if(y(e))t.or.filters.push(e.get());else{if(!p(e))throw new TypeError("Argument must be a Filter or array of Filters");t.or.filters=[];for(n=0,r=e.length;n<r;n++){if(!y(e[n]))throw new TypeError("Argument must be an array of Filters");t.or.filters.push(e[n].get())}}return this},name:function(e){return e==null?t.or._name:(t.or._name=e,this)},cache:function(e){return e==null?t.or._cache:(t.or._cache=e,this)},cacheKey:function(e){return e==null?t.or._cache_key:(t.or._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.PrefixFilter=function(e){var t={prefix:{}};return t.prefix[e]="",{field:function(n){var r=t.prefix[e];return n==null?e:(delete t.prefix[e],e=n,t.prefix[e]=r,this)},prefix:function(n){return n==null?t.prefix[e]:(t.prefix[e]=n,this)},name:function(e){return e==null?t.prefix._name:(t.prefix._name=e,this)},cache:function(e){return e==null?t.prefix._cache:(t.prefix._cache=e,this)},cacheKey:function(e){return e==null?t.prefix._cache_key:(t.prefix._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.QueryFilter=function(e){if(!y(e))throw new TypeError("Argument must be a Query");var t={fquery:{query:e.get()}};return{query:function(e){if(e==null)return t.fquery.query;if(!y(e))throw new TypeError("Argument must be a Query");return t.fquery.query=e.get(),this},name:function(e){return e==null?t.fquery._name:(t.fquery._name=e,this)},cache:function(e){return e==null?t.fquery._cache:(t.fquery._cache=e,this)},cacheKey:function(e){return e==null?t.fquery._cache_key:(t.fquery._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.RangeFilter=function(e){var t={range:{}};return t.range[e]={},{field:function(n){var r=t.range[e];return n==null?e:(delete t.range[e],e=n,t.range[n]=r,this)},from:function(n){return n==null?t.range[e].from:(t.range[e].from=n,this)},to:function(n){return n==null?t.range[e].to:(t.range[e].to=n,this)},includeLower:function(n){return n==null?t.range[e].include_lower:(t.range[e].include_lower=n,this)},includeUpper:function(n){return n==null?t.range[e].include_upper:(t.range[e].include_upper=n,this)},gt:function(n){return n==null?t.range[e].gt:(t.range[e].gt=n,this)},gte:function(n){return n==null?t.range[e].gte:(t.range[e].gte=n,this)},lt:function(n){return n==null?t.range[e].lt:(t.range[e].lt=n,this)},lte:function(n){return n==null?t.range[e].lte:(t.range[e].lte=n,this)},name:function(e){return e==null?t.range._name:(t.range._name=e,this)},cache:function(e){return e==null?t.range._cache:(t.range._cache=e,this)},cacheKey:function(e){return e==null?t.range._cache_key:(t.range._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.ScriptFilter=function(e){var t={script:{script:e}};return{script:function(e){return e==null?t.script.script:(t.script.script=e,this)},params:function(e){return e==null?t.script.params:(t.script.params=e,this)},lang:function(e){return e==null?t.script.lang:(t.script.lang=e,this)},name:function(e){return e==null?t.script._name:(t.script._name=e,this)},cache:function(e){return e==null?t.script._cache:(t.script._cache=e,this)},cacheKey:function(e){return e==null?t.script._cache_key:(t.script._cache_key=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.TermFilter=function(e,t){var n={term:{}};return n.term[e]=t,{field:function(t){var r=n.term[e];return t==null?e:(delete n.term[e],e=t,n.term[e]=r,this)},term:function(t){return t==null?n.term[e]:(n.term[e]=t,this)},name:function(e){return e==null?n.term._name:(n.term._name=e,this)},cache:function(e){return e==null?n.term._cache:(n.term._cache=e,this)},cacheKey:function(e){return e==null?n.term._cache_key:(n.term._cache_key=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.TermsFilter=function(e,t){var n={terms:{}};return p(t)?n.terms[e]=t:n.terms[e]=[t],{field:function(t){var r=n.terms[e];return t==null?e:(delete n.terms[e],e=t,n.terms[t]=r,this)},terms:function(t){return t==null?n.terms[e]:(p(t)?n.terms[e]=t:n.terms[e].push(t),this)},execution:function(e){if(e==null)return n.terms.execution;e=e.toLowerCase();if(e==="plain"||e==="bool"||e==="bool_nocache"||e==="and"||e==="and_nocache"||e==="or"||e==="or_nocache")n.terms.execution=e;return this},name:function(e){return e==null?n.terms._name:(n.terms._name=e,this)},cache:function(e){return e==null?n.terms._cache:(n.terms._cache=e,this)},cacheKey:function(e){return e==null?n.terms._cache_key:(n.terms._cache_key=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.TypeFilter=function(e){var t={type:{value:e}};return{type:function(e){return e==null?t.type.value:(t.type.value=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.Document=function(e){return{get:function(e){},post:function(e){},put:function(e){},del:function(e){}}},b.BoolQuery=function(){var e={bool:{}};return{must:function(t){var n,r;e.bool.must==null&&(e.bool.must=[]);if(t==null)return e.bool.must;if(y(t))e.bool.must.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Query or array of Queries");e.bool.must=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be an array of Queries");e.bool.must.push(t[n].get())}}return this},mustNot:function(t){var n,r;e.bool.must_not==null&&(e.bool.must_not=[]);if(t==null)return e.bool.must_not;if(y(t))e.bool.must_not.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Query or array of Queries");e.bool.must_not=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be an array of Queries");e.bool.must_not.push(t[n].get())}}return this},should:function(t){var n,r;e.bool.should==null&&(e.bool.should=[]);if(t==null)return e.bool.should;if(y(t))e.bool.should.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Query or array of Queries");e.bool.should=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be an array of Queries");e.bool.should.push(t[n].get())}}return this},boost:function(t){return t==null?e.bool.boost:(e.bool.boost=t,this)},disableCoord:function(t){return t==null?e.bool.disable_coord:(e.bool.disable_coord=t,this)},minimumNumberShouldMatch:function(t){return t==null?e.bool.minimum_number_should_match:(e.bool.minimum_number_should_match=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.BoostingQuery=function(e,t,n){if(!y(e)||!y(t))throw new TypeError("Arguments must be Queries");var r={boosting:{positive:e.get(),negative:t.get(),negative_boost:n}};return{positive:function(e){if(e==null)return r.boosting.positive;if(!y(e))throw new TypeError("Argument must be a Query");return r.boosting.positive=e.get(),this},negative:function(e){if(e==null)return r.boosting.negative;if(!y(e))throw new TypeError("Argument must be a Query");return r.boosting.negative=e.get(),this},negativeBoost:function(e){return e==null?r.boosting.negative_boost:(r.boosting.negative_boost=e,this)},boost:function(e){return e==null?r.boosting.boost:(r.boosting.boost=e,this)},toString:function(){return JSON.stringify(r)},get:function(){return r}}},b.ConstantScoreQuery=function(){var e={constant_score:{}};return{query:function(t){if(t==null)return e.constant_score.query;if(!y(t))throw new TypeError("Argument must be a Query");return e.constant_score.query=t.get(),this},filter:function(t){if(t==null)return e.constant_score.filter;if(!y(t))throw new TypeError("Argument must be a Filter");return e.constant_score.filter=t.get(),this},cache:function(t){return t==null?e.constant_score._cache:(e.constant_score._cache=t,this)},cacheKey:function(t){return t==null?e.constant_score._cache_key:(e.constant_score._cache_key=t,this)},boost:function(t){return t==null?e.constant_score.boost:(e.constant_score.boost=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.CustomBoostFactorQuery=function(e){if(!y(e))throw new TypeError("Argument must be a Query");var t={custom_boost_factor:{query:e.get()}};return{query:function(e){if(e==null)return t.custom_boost_factor.query;if(!y(e))throw new TypeError("Argument must be a Query");return t.custom_boost_factor.query=e.get(),this},boostFactor:function(e){return e==null?t.custom_boost_factor.boost_factor:(t.custom_boost_factor.boost_factor=e,this)},boost:function(e){return e==null?t.custom_boost_factor.boost:(t.custom_boost_factor.boost=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.CustomFiltersScoreQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a Query");var n={custom_filters_score:{query:e.get(),filters:[]}},r=function(e){var t=null;return e.filter&&y(e.filter)&&(t={filter:e.filter.get()},e.boost?t.boost=e.boost:e.script?t.script=e.script:t=null),t};return c(p(t)?t:[t],function(e){var t=r(e);t!==null&&n.custom_filters_score.filters.push(t)}),{query:function(e){if(e==null)return n.custom_filters_score.query;if(!y(e))throw new TypeError("Argument must be a Query");return n.custom_filters_score.query=e.get(),this},filters:function(e){return e==null?n.custom_filters_score.filters:(p(e)&&(n.custom_filters_score.filters=[]),c(p(e)?e:[e],function(e){var t=r(e);t!==null&&n.custom_filters_score.filters.push(t)}),this)},scoreMode:function(e){if(e==null)return n.custom_filters_score.score_mode;e=e.toLowerCase();if(e==="first"||e==="min"||e==="max"||e==="total"||e==="avg"||e==="multiply")n.custom_filters_score.score_mode=e;return this},params:function(e){return e==null?n.custom_filters_score.params:(n.custom_filters_score.params=e,this)},lang:function(e){return e==null?n.custom_filters_score.lang:(n.custom_filters_score.lang=e,this)},maxBoost:function(e){return e==null?n.custom_filters_score.max_boost:(n.custom_filters_score.max_boost=e,this)},boost:function(e){return e==null?n.custom_filters_score.boost:(n.custom_filters_score.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.CustomScoreQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a Query");var n={custom_score:{query:e.get(),script:t}};return{query:function(e){if(e==null)return n.custom_score.query;if(!y(e))throw new TypeError("Argument must be a Query");return n.custom_score.query=e.get(),this},script:function(e){return e==null?n.custom_score.script:(n.custom_score.script=e,this)},params:function(e){return e==null?n.custom_score.params:(n.custom_score.params=e,this)},lang:function(e){return e==null?n.custom_score.lang:(n.custom_score.lang=e,this)},boost:function(e){return e==null?n.custom_score.boost:(n.custom_score.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.DisMaxQuery=function(){var e={dis_max:{}};return{queries:function(t){var n,r;if(t==null)return e.dis_max.queries;e.dis_max.queries==null&&(e.dis_max.queries=[]);if(y(t))e.dis_max.queries.push(t.get());else{if(!p(t))throw new TypeError("Argument must be a Query or array of Queries");e.dis_max.queries=[];for(n=0,r=t.length;n<r;n++){if(!y(t[n]))throw new TypeError("Argument must be array of Queries");e.dis_max.queries.push(t[n].get())}}return this},boost:function(t){return t==null?e.dis_max.boost:(e.dis_max.boost=t,this)},tieBreaker:function(t){return t==null?e.dis_max.tie_breaker:(e.dis_max.tie_breaker=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.FieldQuery=function(e,t){var n={field:{}};return n.field[e]={query:t},{field:function(t){var r=n.field[e];return t==null?e:(delete n.field[e],e=t,n.field[t]=r,this)},query:function(t){return t==null?n.field[e].query:(n.field[e].query=t,this)},defaultOperator:function(t){if(t==null)return n.field[e].default_operator;t=t.toUpperCase();if(t==="AND"||t==="OR")n.field[e].default_operator=t;return this},analyzer:function(t){return t==null?n.field[e].analyzer:(n.field[e].analyzer=t,this)},quoteAnalyzer:function(t){return t==null?n.field[e].quote_analyzer:(n.field[e].quote_analyzer=t,this)},autoGeneratePhraseQueries:function(t){return t==null?n.field[e].auto_generate_phrase_queries:(n.field[e].auto_generate_phrase_queries=t,this)},allowLeadingWildcard:function(t){return t==null?n.field[e].allow_leading_wildcard:(n.field[e].allow_leading_wildcard=t,this)},lowercaseExpandedTerms:function(t){return t==null?n.field[e].lowercase_expanded_terms:(n.field[e].lowercase_expanded_terms=t,this)},enablePositionIncrements:function(t){return t==null?n.field[e].enable_position_increments:(n.field[e].enable_position_increments=t,this)},fuzzyMinSim:function(t){return t==null?n.field[e].fuzzy_min_sim:(n.field[e].fuzzy_min_sim=t,this)},boost:function(t){return t==null?n.field[e].boost:(n.field[e].boost=t,this)},fuzzyPrefixLength:function(t){return t==null?n.field[e].fuzzy_prefix_length:(n.field[e].fuzzy_prefix_length=t,this)},fuzzyMaxExpansions:function(t){return t==null?n.field[e].fuzzy_max_expansions:(n.field[e].fuzzy_max_expansions=t,this)},fuzzyRewrite:function(t){if(t==null)return n.field[e].fuzzy_rewrite;t=t.toLowerCase();if(t==="constant_score_auto"||t==="scoring_boolean"||t==="constant_score_boolean"||t==="constant_score_filter"||t.indexOf("top_terms_boost_")===0||t.indexOf("top_terms_")===0)n.field[e].fuzzy_rewrite=t;return this},rewrite:function(t){if(t==null)return n.field[e].rewrite;t=t.toLowerCase();if(t==="constant_score_auto"||t==="scoring_boolean"||t==="constant_score_boolean"||t==="constant_score_filter"||t.indexOf("top_terms_boost_")===0||t.indexOf("top_terms_")===0)n.field[e].rewrite=t;return this},quoteFieldSuffix:function(t){return t==null?n.field[e].quote_field_suffix:(n.field[e].quote_field_suffix=t,this)},phraseSlop:function(t){return t==null?n.field[e].phrase_slop:(n.field[e].phrase_slop=t,this)},analyzeWildcard:function(t){return t==null?n.field[e].analyze_wildcard:(n.field[e].analyze_wildcard=t,this)},escape:function(t){return t==null?n.field[e].escape:(n.field[e].escape=t,this)},minimumShouldMatch:function(t){return t==null?n.field[e].minimum_should_match:(n.field[e].minimum_should_match=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.FilteredQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a Query");if(t!=null&&!y(t))throw new TypeError("Argument must be a Filter");var n={filtered:{query:e.get()}};return t!=null&&(n.filtered.filter=t.get()),{query:function(e){if(e==null)return n.filtered.query;if(!y(e))throw new TypeError("Argument must be a Query");return n.filtered.query=e.get(),this},filter:function(e){if(e==null)return n.filtered.filter;if(!y(e))throw new TypeError("Argument must be a Filter");return n.filtered.filter=e.get(),this},strategy:function(e){if(e==null)return n.filtered.strategy;e=e.toLowerCase();if(e==="query_filter"||e==="random_access_random"||e==="leap_frog"||e==="leap_frog_filter_first"||e.indexOf("random_access_")===0)n.filtered.strategy=e;return this},cache:function(e){return e==null?n.filtered._cache:(n.filtered._cache=e,this)},cacheKey:function(e){return e==null?n.filtered._cache_key:(n.filtered._cache_key=e,this)},boost:function(e){return e==null?n.filtered.boost:(n.filtered.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.FuzzyLikeThisFieldQuery=function(e,t){var n={flt_field:{}};return n.flt_field[e]={like_text:t},{field:function(t){var r=n.flt_field[e];return t==null?e:(delete n.flt_field[e],e=t,n.flt_field[t]=r,this)},likeText:function(t){return t==null?n.flt_field[e].like_text:(n.flt_field[e].like_text=t,this)},ignoreTf:function(t){return t==null?n.flt_field[e].ignore_tf:(n.flt_field[e].ignore_tf=t,this)},maxQueryTerms:function(t){return t==null?n.flt_field[e].max_query_terms:(n.flt_field[e].max_query_terms=t,this)},minSimilarity:function(t){return t==null?n.flt_field[e].min_similarity:(n.flt_field[e].min_similarity=t,this)},prefixLength:function(t){return t==null?n.flt_field[e].prefix_length:(n.flt_field[e].prefix_length=t,this)},analyzer:function(t){return t==null?n.flt_field[e].analyzer:(n.flt_field[e].analyzer=t,this)},boost:function(t){return t==null?n.flt_field[e].boost:(n.flt_field[e].boost=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.FuzzyLikeThisQuery=function(e){var t={flt:{like_text:e}};return{fields:function(e){t.flt.fields==null&&(t.flt.fields=[]);if(e==null)return t.flt.fields;if(v(e))t.flt.fields.push(e);else{if(!p(e))throw new TypeError("Argument must be a string or array");t.flt.fields=e}return this},likeText:function(e){return e==null?t.flt.like_text:(t.flt.like_text=e,this)},ignoreTf:function(e){return e==null?t.flt.ignore_tf:(t.flt.ignore_tf=e,this)},maxQueryTerms:function(e){return e==null?t.flt.max_query_terms:(t.flt.max_query_terms=e,this)},minSimilarity:function(e){return e==null?t.flt.min_similarity:(t.flt.min_similarity=e,this)},prefixLength:function(e){return e==null?t.flt.prefix_length:(t.flt.prefix_length=e,this)},analyzer:function(e){return e==null?t.flt.analyzer:(t.flt.analyzer=e,this)},boost:function(e){return e==null?t.flt.boost:(t.flt.boost=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.FuzzyQuery=function(e,t){var n={fuzzy:{}};return n.fuzzy[e]={value:t},{field:function(t){var r=n.fuzzy[e];return t==null?e:(delete n.fuzzy[e],e=t,n.fuzzy[t]=r,this)},value:function(t){return t==null?n.fuzzy[e].value:(n.fuzzy[e].value=t,this)},transpositions:function(t){return t==null?n.fuzzy[e].transpositions:(n.fuzzy[e].transpositions=t,this)},maxExpansions:function(t){return t==null?n.fuzzy[e].max_expansions:(n.fuzzy[e].max_expansions=t,this)},minSimilarity:function(t){return t==null?n.fuzzy[e].min_similarity:(n.fuzzy[e].min_similarity=t,this)},prefixLength:function(t){return t==null?n.fuzzy[e].prefix_length:(n.fuzzy[e].prefix_length=t,this)},rewrite:function(t){if(t==null)return n.fuzzy[e].rewrite;t=t.toLowerCase();if(t==="constant_score_auto"||t==="scoring_boolean"||t==="constant_score_boolean"||t==="constant_score_filter"||t.indexOf("top_terms_boost_")===0||t.indexOf("top_terms_")===0)n.fuzzy[e].rewrite=t;return this},boost:function(t){return t==null?n.fuzzy[e].boost:(n.fuzzy[e].boost=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.GeoShapeQuery=function(e){var t={geo_shape:{}};return t.geo_shape[e]={},{field:function(n){var r=t.geo_shape[e];return n==null?e:(delete t.geo_shape[e],e=n,t.geo_shape[n]=r,this)},shape:function(n){return n==null?t.geo_shape[e].shape:(t.geo_shape[e].indexed_shape!=null&&delete t.geo_shape[e].indexed_shape,t.geo_shape[e].shape=n.get(),this)},indexedShape:function(n){return n==null?t.geo_shape[e].indexed_shape:(t.geo_shape[e].shape!=null&&delete t.geo_shape[e].shape,t.geo_shape[e].indexed_shape=n.get(),this)},relation:function(n){if(n==null)return t.geo_shape[e].relation;n=n.toLowerCase();if(n==="intersects"||n==="disjoint"||n==="within")t.geo_shape[e].relation=n;return this},boost:function(n){return n==null?t.geo_shape[e].boost:(t.geo_shape[e].boost=n,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.HasChildQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a valid Query");var n={has_child:{query:e.get(),type:t}};return{query:function(e){if(e==null)return n.has_child.query;if(!y(e))throw new TypeError("Argument must be a valid Query");return n.has_child.query=e.get(),this},type:function(e){return e==null?n.has_child.type:(n.has_child.type=e,this)},scope:function(e){return e==null?n.has_child._scope:(n.has_child._scope=e,this)},boost:function(e){return e==null?n.has_child.boost:(n.has_child.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.HasParentQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a Query");var n={has_parent:{query:e.get(),parent_type:t}};return{query:function(e){if(e==null)return n.has_parent.query;if(!y(e))throw new TypeError("Argument must be a Query");return n.has_parent.query=e.get(),this},parentType:function(e){return e==null?n.has_parent.parent_type:(n.has_parent.parent_type=e,this)},scope:function(e){return e==null?n.has_parent._scope:(n.has_parent._scope=e,this)},boost:function(e){return e==null?n.has_parent.boost:(n.has_parent.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.IdsQuery=function(e){var t={ids:{}};if(v(e))t.ids.values=[e];else{if(!p(e))throw new TypeError("Argument must be string or array");t.ids.values=e}return{values:function(e){if(e==null)return t.ids.values;if(v(e))t.ids.values.push(e);else{if(!p(e))throw new TypeError("Argument must be string or array");t.ids.values=e}return this},type:function(e){t.ids.type==null&&(t.ids.type=[]);if(e==null)return t.ids.type;if(v(e))t.ids.type.push(e);else{if(!p(e))throw new TypeError("Argument must be string or array");t.ids.type=e}return this},boost:function(e){return e==null?t.ids.boost:(t.ids.boost=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.IndicesQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a Query");var n={indices:{query:e.get()}};if(v(t))n.indices.indices=[t];else{if(!p(t))throw new TypeError("Argument must be a string or array");n.indices.indices=t}return{indices:function(e){if(e==null)return n.indices.indices;if(v(e))n.indices.indices.push(e);else{if(!p(e))throw new TypeError("Argument must be a string or array");n.indices.indices=e}return this},query:function(e){if(e==null)return n.indices.query;if(!y(e))throw new TypeError("Argument must be a Query");return n.indices.query=e.get(),this},noMatchQuery:function(e){if(e==null)return n.indices.no_match_query;if(v(e)){e=e.toLowerCase();if(e==="none"||e==="all")n.indices.no_match_query=e}else{if(!y(e))throw new TypeError("Argument must be string or Query");n.indices.no_match_query=e.get()}return this},boost:function(e){return e==null?n.indices.boost:(n.indices.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.MatchAllQuery=function(){var e={match_all:{}};return{boost:function(t){return t==null?e.match_all.boost:(e.match_all.boost=t,this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.MatchQuery=function(e,t){var n={match:{}};return n.match[e]={query:t},{boost:function(t){return t==null?n.match[e].boost:(n.match[e].boost=t,this)},query:function(t){return t==null?n.match[e].query:(n.match[e].query=t,this)},type:function(t){if(t==null)return n.match[e].type;t=t.toLowerCase();if(t==="boolean"||t==="phrase"||t==="phrase_prefix")n.match[e].type=t;return this},fuzziness:function(t){return t==null?n.match[e].fuzziness:(n.match[e].fuzziness=t,this)},prefixLength:function(t){return t==null?n.match[e].prefix_length:(n.match[e].prefix_length=t,this)},maxExpansions:function(t){return t==null?n.match[e].max_expansions:(n.match[e].max_expansions=t,this)},operator:function(t){if(t==null)return n.match[e].operator;t=t.toLowerCase();if(t==="and"||t==="or")n.match[e].operator=t;return this},slop:function(t){return t==null?n.match[e].slop:(n.match[e].slop=t,this)},analyzer:function(t){return t==null?n.match[e].analyzer:(n.match[e].analyzer=t,this)},minimumShouldMatch:function(t){return t==null?n.match[e].minimum_should_match:(n.match[e].minimum_should_match=t,this)},rewrite:function(t){if(t==null)return n.match[e].rewrite;t=t.toLowerCase();if(t==="constant_score_auto"||t==="scoring_boolean"||t==="constant_score_boolean"||t==="constant_score_filter"||t.indexOf("top_terms_boost_")===0||t.indexOf("top_terms_")===0)n.match[e].rewrite=t;return this},fuzzyRewrite:function(t){if(t==null)return n.match[e].fuzzy_rewrite;t=t.toLowerCase();if(t==="constant_score_auto"||t==="scoring_boolean"||t==="constant_score_boolean"||t==="constant_score_filter"||t.indexOf("top_terms_boost_")===0||t.indexOf("top_terms_")===0)n.match[e].fuzzy_rewrite=t;return this},fuzzyTranspositions:function(t){return t==null?n.match[e].fuzzy_transpositions:(n.match[e].fuzzy_transpositions=t,this)},lenient:function(t){return t==null?n.match[e].lenient:(n.match[e].lenient=t,this)},zeroTermsQuery:function(t){if(t==null)return n.match[e].zero_terms_query;t=t.toLowerCase();if(t==="all"||t==="none")n.match[e].zero_terms_query=t;return this},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.MoreLikeThisFieldQuery=function(e,t){var n={mlt_field:{}};return n.mlt_field[e]={like_text:t},{field:function(t){var r=n.mlt_field[e];return t==null?e:(delete n.mlt_field[e],e=t,n.mlt_field[t]=r,this)},likeText:function(t){return t==null?n.mlt_field[e].like_text:(n.mlt_field[e].like_text=t,this)},percentTermsToMatch:function(t){return t==null?n.mlt_field[e].percent_terms_to_match:(n.mlt_field[e].percent_terms_to_match=t,this)},minTermFreq:function(t){return t==null?n.mlt_field[e].min_term_freq:(n.mlt_field[e].min_term_freq=t,this)},maxQueryTerms:function(t){return t==null?n.mlt_field[e].max_query_terms:(n.mlt_field[e].max_query_terms=t,this)},stopWords:function(t){return t==null?n.mlt_field[e].stop_words:(n.mlt_field[e].stop_words=t,this)},minDocFreq:function(t){return t==null?n.mlt_field[e].min_doc_freq:(n.mlt_field[e].min_doc_freq=t,this)},maxDocFreq:function(t){return t==null?n.mlt_field[e].max_doc_freq:(n.mlt_field[e].max_doc_freq=t,this)},minWordLen:function(t){return t==null?n.mlt_field[e].min_word_len:(n.mlt_field[e].min_word_len=t,this)},maxWordLen:function(t){return t==null?n.mlt_field[e].max_word_len:(n.mlt_field[e].max_word_len=t,this)},analyzer:function(t){return t==null?n.mlt_field[e].analyzer:(n.mlt_field[e].analyzer=t,this)},boostTerms:function(t){return t==null?n.mlt_field[e].boost_terms:(n.mlt_field[e].boost_terms=t,this)},boost:function(t){return t==null?n.mlt_field[e].boost:(n.mlt_field[e].boost=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.MoreLikeThisQuery=function(e,t){var n={mlt:{like_text:t,fields:[]}};if(v(e))n.mlt.fields.push(e);else{if(!p(e))throw new TypeError("Argument must be string or array");n.mlt.fields=e}return{fields:function(e){if(e==null)return n.mlt.fields;if(v(e))n.mlt.fields.push(e);else{if(!p(e))throw new TypeError("Argument must be a string or array");n.mlt.fields=e}return this},likeText:function(e){return e==null?n.mlt.like_text:(n.mlt.like_text=e,this)},percentTermsToMatch:function(e){return e==null?n.mlt.percent_terms_to_match:(n.mlt.percent_terms_to_match=e,this)},minTermFreq:function(e){return e==null?n.mlt.min_term_freq:(n.mlt.min_term_freq=e,this)},maxQueryTerms:function(e){return e==null?n.mlt.max_query_terms:(n.mlt.max_query_terms=e,this)},stopWords:function(e){return e==null?n.mlt.stop_words:(n.mlt.stop_words=e,this)},minDocFreq:function(e){return e==null?n.mlt.min_doc_freq:(n.mlt.min_doc_freq=e,this)},maxDocFreq:function(e){return e==null?n.mlt.max_doc_freq:(n.mlt.max_doc_freq=e,this)},minWordLen:function(e){return e==null?n.mlt.min_word_len:(n.mlt.min_word_len=e,this)},maxWordLen:function(e){return e==null?n.mlt.max_word_len:(n.mlt.max_word_len=e,this)},analyzer:function(e){return e==null?n.mlt.analyzer:(n.mlt.analyzer=e,this)},boostTerms:function(e){return e==null?n.mlt.boost_terms:(n.mlt.boost_terms=e,this)},boost:function(e){return e==null?n.mlt.boost:(n.mlt.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.MultiMatchQuery=function(e,t){var n={multi_match:{query:t,fields:[]}};if(v(e))n.multi_match.fields.push(e);else{if(!p(e))throw new TypeError("Argument must be string or array");n.multi_match.fields=e}return{fields:function(e){if(e==null)return n.multi_match.fields;if(v(e))n.multi_match.fields.push(e);else{if(!p(e))throw new TypeError("Argument must be string or array");n.multi_match.fields=e}return this},useDisMax:function(e){return e==null?n.multi_match.use_dis_max:(n.multi_match.use_dis_max=e,this)},tieBreaker:function(e){return e==null?n.multi_match.tie_breaker:(n.multi_match.tie_breaker=e,this)},minimumShouldMatch:function(e){return e==null?n.multi_match.minimum_should_match:(n.multi_match.minimum_should_match=e,this)},rewrite:function(e){if(e==null)return n.multi_match.rewrite;e=e.toLowerCase();if(e==="constant_score_auto"||e==="scoring_boolean"||e==="constant_score_boolean"||e==="constant_score_filter"||e.indexOf("top_terms_boost_")===0||e.indexOf("top_terms_")===0)n.multi_match.rewrite=e;return this},fuzzyRewrite:function(e){if(e==null)return n.multi_match.fuzzy_rewrite;e=e.toLowerCase();if(e==="constant_score_auto"||e==="scoring_boolean"||e==="constant_score_boolean"||e==="constant_score_filter"||e.indexOf("top_terms_boost_")===0||e.indexOf("top_terms_")===0)n.multi_match.fuzzy_rewrite=e;return this},lenient:function(e){return e==null?n.multi_match.lenient:(n.multi_match.lenient=e,this)},boost:function(e){return e==null?n.multi_match.boost:(n.multi_match.boost=e,this)},query:function(e){return e==null?n.multi_match.query:(n.multi_match.query=e,this)},type:function(e){if(e==null)return n.multi_match.type;e=e.toLowerCase();if(e==="boolean"||e==="phrase"||e==="phrase_prefix")n.multi_match.type=e;return this},fuzziness:function(e){return e==null?n.multi_match.fuzziness:(n.multi_match.fuzziness=e,this)},prefixLength:function(e){return e==null?n.multi_match.prefix_length:(n.multi_match.prefix_length=e,this)},maxExpansions:function(e){return e==null?n.multi_match.max_expansions:(n.multi_match.max_expansions=e,this)},operator:function(e){if(e==null)return n.multi_match.operator;e=e.toLowerCase();if(e==="and"||e==="or")n.multi_match.operator=e;return this},slop:function(e){return e==null?n.multi_match.slop:(n.multi_match.slop=e,this)},analyzer:function(e){return e==null?n.multi_match.analyzer:(n.multi_match.analyzer=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.NestedQuery=function(e){var t={nested:{path:e}};return{path:function(e){return e==null?t.nested.path:(t.nested.path=e,this)},query:function(e){if(e==null)return t.nested.query;if(!y(e))throw new TypeError("Argument must be a Query");return t.nested.query=e.get(),this},filter:function(e){if(e==null)return t.nested.filter;if(!y(e))throw new TypeError("Argument must be a Filter");return t.nested.filter=e.get(),this},scoreMode:function(e){if(e==null)return t.nested.score_mode;e=e.toLowerCase();if(e==="avg"||e==="total"||e==="max"||e==="none")t.nested.score_mode=e;return this},scope:function(e){return e==null?t.nested._scope:(t.nested._scope=e,this)},boost:function(e){return e==null?t.nested.boost:(t.nested.boost=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.PrefixQuery=function(e,t){var n={prefix:{}};return n.prefix[e]={value:t},{field:function(t){var r=n.prefix[e];return t==null?e:(delete n.prefix[e],e=t,n.prefix[t]=r,this)},value:function(t){return t==null?n.prefix[e].value:(n.prefix[e].value=t,this)},rewrite:function(t){if(t==null)return n.prefix[e].rewrite;t=t.toLowerCase();if(t==="constant_score_auto"||t==="scoring_boolean"||t==="constant_score_boolean"||t==="constant_score_filter"||t.indexOf("top_terms_boost_")===0||t.indexOf("top_terms_")===0)n.prefix[e].rewrite=t;return this},boost:function(t){return t==null?n.prefix[e].boost:(n.prefix[e].boost=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.QueryStringQuery=function(e){var t={query_string:{}};return t.query_string.query=e,{query:function(e){return e==null?t.query_string.query:(t.query_string.query=e,this)},defaultField:function(e){return e==null?t.query_string.default_field:(t.query_string.default_field=e,this)},fields:function(e){t.query_string.fields==null&&(t.query_string.fields=[]);if(e==null)return t.query_string.fields;if(v(e))t.query_string.fields.push(e);else{if(!p(e))throw new TypeError("Argument must be a string or array");t.query_string.fields=e}return this},useDisMax:function(e){return e==null?t.query_string.use_dis_max:(t.query_string.use_dis_max=e,this)},defaultOperator:function(e){if(e==null)return t.query_string.default_operator;e=e.toUpperCase();if(e==="AND"||e==="OR")t.query_string.default_operator=e;return this},analyzer:function(e){return e==null?t.query_string.analyzer:(t.query_string.analyzer=e,this)},quoteAnalyzer:function(e){return e==null?t.query_string.quote_analyzer:(t.query_string.quote_analyzer=e,this)},allowLeadingWildcard:function(e){return e==null?t.query_string.allow_leading_wildcard:(t.query_string.allow_leading_wildcard=e,this)},lowercaseExpandedTerms:function(e){return e==null?t.query_string.lowercase_expanded_terms:(t.query_string.lowercase_expanded_terms=e,this)},enablePositionIncrements:function(e){return e==null?t.query_string.enable_position_increments:(t.query_string.enable_position_increments=e,this)},fuzzyPrefixLength:function(e){return e==null?t.query_string.fuzzy_prefix_length:(t.query_string.fuzzy_prefix_length=e,this)},fuzzyMinSim:function(e){return e==null?t.query_string.fuzzy_min_sim:(t.query_string.fuzzy_min_sim=e,this)},phraseSlop:function(e){return e==null?t.query_string.phrase_slop:(t.query_string.phrase_slop=e,this)},boost:function(e){return e==null?t.query_string.boost:(t.query_string.boost=e,this)},analyzeWildcard:function(e){return e==null?t.query_string.analyze_wildcard:(t.query_string.analyze_wildcard=e,this)},autoGeneratePhraseQueries:function(e){return e==null?t.query_string.auto_generate_phrase_queries:(t.query_string.auto_generate_phrase_queries=e,this)},minimumShouldMatch:function(e){return e==null?t.query_string.minimum_should_match:(t.query_string.minimum_should_match=e,this)},tieBreaker:function(e){return e==null?t.query_string.tie_breaker:(t.query_string.tie_breaker=e,this)},escape:function(e){return e==null?t.query_string.escape:(t.query_string.escape=e,this)},fuzzyMaxExpansions:function(e){return e==null?t.query_string.fuzzy_max_expansions:(t.query_string.fuzzy_max_expansions=e,this)},fuzzyRewrite:function(e){if(e==null)return t.query_string.fuzzy_rewrite;e=e.toLowerCase();if(e==="constant_score_auto"||e==="scoring_boolean"||e==="constant_score_boolean"||e==="constant_score_filter"||e.indexOf("top_terms_boost_")===0||e.indexOf("top_terms_")===0)t.query_string.fuzzy_rewrite=e;return this},rewrite:function(e){if(e==null)return t.query_string.rewrite;e=e.toLowerCase();if(e==="constant_score_auto"||e==="scoring_boolean"||e==="constant_score_boolean"||e==="constant_score_filter"||e.indexOf("top_terms_boost_")===0||e.indexOf("top_terms_")===0)t.query_string.rewrite=e;return this},quoteFieldSuffix:function(e){return e==null?t.query_string.quote_field_suffix:(t.query_string.quote_field_suffix=e,this)},lenient:function(e){return e==null?t.query_string.lenient:(t.query_string.lenient=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.RangeQuery=function(e){var t={range:{}};return t.range[e]={},{field:function(n){var r=t.range[e];return n==null?e:(delete t.range[e],e=n,t.range[n]=r,this)},from:function(n){return n==null?t.range[e].from:(t.range[e].from=n,this)},to:function(n){return n==null?t.range[e].to:(t.range[e].to=n,this)},includeLower:function(n){return n==null?t.range[e].include_lower:(t.range[e].include_lower=n,this)},includeUpper:function(n){return n==null?t.range[e].include_upper:(t.range[e].include_upper=n,this)},gt:function(n){return n==null?t.range[e].gt:(t.range[e].gt=n,this)},gte:function(n){return n==null?t.range[e].gte:(t.range[e].gte=n,this)},lt:function(n){return n==null?t.range[e].lt:(t.range[e].lt=n,this)},lte:function(n){return n==null?t.range[e].lte:(t.range[e].lte=n,this)},boost:function(n){return n==null?t.range[e].boost:(t.range[e].boost=n,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.SpanFirstQuery=function(e,t){if(!y(e))throw new TypeError("Argument must be a SpanQuery");var n={span_first:{match:e.get(),end:t}};return{match:function(e){if(e==null)return n.span_first.match;if(!y(e))throw new TypeError("Argument must be a SpanQuery");return n.span_first.match=e.get(),this},end:function(e){return e==null?n.span_first.end:(n.span_first.end=e,this)},boost:function(e){return e==null?n.span_first.boost:(n.span_first.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.SpanNearQuery=function(e){e=e||[];var t={span_near:{clauses:[]}},n=e.length,r=0;for(;r<n;r++)t.span_near.clauses.push(e[r].get());return{addClause:function(e){return e==null?t.span_near.clauses:(t.span_near.clauses.push(e.get()),this)},clauses:function(e){if(e==null)return t.span_near.clauses;t.span_near.clauses=[];var n=e.length,r=0;for(;r<n;r++)this.addClause(e[r]);return this},slop:function(e){return e==null?t.span_near.slop:(t.span_near.slop=e,this)},inOrder:function(e){return e==null?t.span_near.in_order:(t.span_near.in_order=e,this)},collectPayloads:function(e){return e==null?t.span_near.collect_payloads:(t.span_near.collect_payloads=e,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.SpanNotQuery=function(){var e={span_not:{}};return{include:function(t){return t==null?e.span_not.include:(e.span_not.include=t.get(),this)},exclude:function(t){return t==null?e.span_not.exclude:(e.span_not.exclude=t.get(),this)},toString:function(){return JSON.stringify(e)},get:function(){return e}}},b.SpanOrQuery=function(e){e=e||[];var t={span_or:{clauses:[]}},n=e.length,r=0;for(;r<n;r++)t.span_or.clauses.push(e[r].get());return{addClause:function(e){return e==null?t.span_or.clauses:(t.span_or.clauses.push(e.get()),this)},clauses:function(e){if(e==null)return t.span_or.clauses;t.span_or.clauses=[];var n=e.length,r=0;for(;r<n;r++)this.addClause(e[r]);return this},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.SpanTermQuery=function(e,t){var n,r,i={span_term:{}};return n=e,r=t,i.span_term[n]=r,{boost:function(e){return e==null?i.span_term[n].boost:(i.span_term[n]={value:r,boost:e},this)},toString:function(){return JSON.stringify(i)},get:function(){return i}}},b.TermQuery=function(e,t){var n={term:{}};return n.term[e]={term:t},{field:function(t){var r=n.term[e];return t==null?e:(e=t,n.term={},n.term[t]=r,this)},term:function(t){return t==null?n.term[e].term:(n.term[e].term=t,this)},boost:function(t){return t==null?n.term[e].boost:(n.term[e].boost=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.TermsQuery=function(e,t){var n={terms:{}};return n.terms[e]=t,{field:function(t){var r=n.terms[e];return t==null?e:(delete n.terms[e],e=t,n.terms[t]=r,this)},terms:function(t){return t==null?n.terms[e]:(typeof t=="string"?n.terms[e].push(t):n.terms[e]=t,this)},minimumMatch:function(e){return e==null?n.terms.minimum_match:(n.terms.minimum_match=e,this)},boost:function(e){return e==null?n.terms.boost:(n.terms.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.TopChildrenQuery=function(e,t){var n={top_children:{query:e.get(),type:t}};return{query:function(e){return e==null?n.top_children.query:(n.top_children.query=e.get(),this)},type:function(e){return e==null?n.top_children.type:(n.top_children.type=e,this)},scope:function(e){return e==null?n.top_children._scope:(n.top_children._scope=e,this)},score:function(e){if(e==null)return n.top_children.score;e=e.toLowerCase();if(e==="max"||e==="sum"||e==="avg")n.top_children.score=e;return this},factor:function(e){return e==null?n.top_children.factor:(n.top_children.factor=e,this)},incrementalFactor:function(e){return e==null?n.top_children.incremental_factor:(n.top_children.incremental_factor=e,this)},boost:function(e){return e==null?n.top_children.boost:(n.top_children.boost=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.WildcardQuery=function(e,t){var n={wildcard:{}};return n.wildcard[e]={value:t},{field:function(t){var r=n.wildcard[e];return t==null?e:(e=t,n.wildcard={},n.wildcard[t]=r,this)},value:function(t){return t==null?n.wildcard[e].value:(n.wildcard[e].value=t,this)},boost:function(t){return t==null?n.wildcard[e].boost:(n.wildcard[e].boost=t,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.ComputedProperty=function(e){var t={};return t[e]={},{lang:function(n){return n==null?t[e].lang:(t[e].lang=n,this)},script:function(n){return n==null?t[e].script:(t[e].script=n,this)},params:function(n){return n==null?t[e].params:(t[e].params=n,this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.GeoPoint=function(e){var t=[0,0];return e!=null&&p(e)&&e.length===2&&(t=[e[1],e[0]]),{properties:function(e){return e==null?t:(d(e)&&l(e,"lat")&&l(e,"lon")&&(t={lat:e.lat,lon:e.lon}),this)},string:function(e){return e==null?t:(v(e)&&e.indexOf(",")!==-1&&(t=e),this)},geohash:function(e,n){return n=n!=null&&m(n)?n:12,e==null?t:(v(e)&&e.length===n&&(t=e),this)},array:function(e){return e==null?t:(p(e)&&e.length===2&&(t=[e[1],e[0]]),this)},toString:function(){return JSON.stringify(t)},get:function(){return t}}},b.IndexedShape=function(e,t){var n={type:e,id:t};return{type:function(e){return e==null?n.type:(n.type=e,this)},id:function(e){return e==null?n.id:(n.id=e,this)},index:function(e){return e==null?n.index:(n.index=e,this)},shapeFieldName:function(e){return e==null?n.shape_field_name:(n.shape_field_name=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.Request=function(e){var t,n,r;return t={size:10,from:0},e=e||{},e.collections==null?n=[]:typeof e.collections=="string"?n=[e.collections]:n=e.collections,e.types==null?r=[]:typeof e.types=="string"?r=[e.types]:r=e.types,n.length===0&&r.length>0&&(n=["_all"]),{sort:function(e,n){n=n||"desc",l(t,"sort")||(t.sort=[]);if(arguments.length===0)return t.sort;var r={};return r[e]=n,t.sort.push(r),this},size:function(e){return e==null?t.size:(t.size=e,this)},fields:function(e){return e==null?t.fields:(t.fields=e,this)},from:function(e){return e==null?t.from:(t.from=e,this)},query:function(e){return e==null?t.query:(t.query=e.get(),this)},collections:function(e){return e==null?n:(typeof e=="string"?n=[e]:n=e,n.length===0&&r.length>0&&(n=["_all"]),this)},types:function(e){return e==null?r:(typeof e=="string"?r=[e]:r=e,n.length===0&&r.length>0&&(n=["_all"]),this)},facet:function(e){return e==null?t.facets:(t.facets==null&&(t.facets={}),h(t.facets,e.get()),this)},filter:function(e){return e==null?t.filter:(t.filter=e.get(),this)},highlight:function(e){var n,r;t.highlight={fields:{}};if(e==null)return t.highlight.fields;for(n=0,r=e.length;n<r;n++)t.highlight.fields[e[n]]={};return this},highlightPreTags:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.pre_tags:(n==null?t.highlight.pre_tags=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].pre_tags=e),this)},highlightPostTags:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.post_tags:(n==null?t.highlight.post_tags=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].post_tags=e),this)},highlightTagSchema:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.tags_schema:(n==null?t.highlight.tags_schema=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].tags_schema=e),this)},highlightFragments:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.number_of_fragments:(n==null?t.highlight.number_of_fragments=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].number_of_fragments=e),this)},highlightFragmentSize:function(e,n){return t.highlight==null&&(t.highlight={fields:{}}),arguments.length===0?t.highlight.fragment_size:(n==null?t.highlight.fragment_size=e:(t.highlight.fields[n]=t.highlight.fields[n]||{},t.highlight.fields[n].fragment_size=e),this)},computedProperty:function(e){return e==null?t.script_fields:(t.script_fields==null&&(t.script_fields={}),h(t.script_fields,e.get()),this)},preference:function(e){return e==null?t.perference:(t.perference=e,this)},indexBoost:function(e,n){return t.indices_boost==null&&(t.indices_boost={}),arguments.length===0?t.indices_boost:(t.indices_boost[e]=n,this)},explain:function(e){return e==null?t.explain:(t.explain=e,this)},version:function(e){return e==null?t.version:(t.version=e,this)},minScore:function(e){return e==null?t.min_score:(t.min_score=e,this)},toString:function(){return JSON.stringify(t)},get:function(e){var i=JSON.stringify(t),s="";if(b.client==null)throw new Error("No Client Set");return n.length>0&&(s=s+"/"+n.join()),r.length>0&&(s=s+"/"+r.join()),s+="/_search",b.client.post(s,i,e)}}},b.Shape=function(e,t){var n={},r=function(e){var t=!1;if(e==="point"||e==="linestring"||e==="polygon"||e==="multipoint"||e==="envelope"||e==="multipolygon")t=!0;return t};return r(e)&&(n.type=e,n.coordinates=t),{type:function(e){return e==null?n.type:(r(e)&&(n.type=e),this)},coordinates:function(e){return e==null?n.coordinates:(n.coordinates=e,this)},toString:function(){return JSON.stringify(n)},get:function(){return n}}},b.noConflict=function(){return e.ejs=t,this}})();